## synchronized关键字

+ 修饰范围

  1. 实例方法

     修饰在实例方法之前，本质上就是作用在this 对象上面。每个对象都会有一个锁和一个等待队列，锁只能被一个线程持有，没法获取锁的情况下，就回被放在等待队列，状态设置为BLOCKED。当线程释放锁了，就回唤醒等待队列里面的任意一个线程，不保证公平。由于synchronized关键字是可重入的，当一个线程持有了这个对象以后，能重入的访问被同一个对象保护的其他方法。

     ```java
     public synchronized void incr() {
         count++;
     }
     ```

  2. 静态方法

     修饰在静态方法之前，实际上是作用在class对象。

  3. 代码块

+ 可重入性

  Synchronized关键字是可重入的

+ 内存可见性

  synchronized关键字能保证在释放锁的时候，所有的操作结果都会被同步到内存。单纯为了解决内存可见性问题，可以使用volatile。

+ 死锁

  为了防止死锁，应该保证多个不同的线程获取同一批资源的时候顺序是一致的。